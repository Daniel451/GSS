\documentclass[ngerman]{fbi-aufgabenblatt}


\usepackage[autostyle=true,german=quotes]{csquotes}
\usepackage{listings}
\usepackage{blockgraph}
\usepackage{amsmath}

\renewcommand{\Aufgabenblatt}{4}
\renewcommand{\Gruppe}{G01}
\renewcommand{\KleinGruppe}{A}
\renewcommand{\Teilnehmer}{Huynh, Krempels, Rupnow, Speck}

\begin{document}



\aufgabe{Scheduling-Algorithmen}

(1a) \quad Scheduling-Strategie: Beste Bediengüte

\begin{blockgraph}{15}{1}{1}
	\bglabelxx{0}
	\bglabelxx{5}
	\bglabelxx{10}
	\bglabelxx{15}

	\bgblock{0}{6}{$P_1$}
	\bgblock{7}{8}{$P_3$}
	\bgblock{9}{11}{$P_4$}
	\bgblock{12}{15}{$P_2$}
\end{blockgraph}
\begin{blockgraph}{15}{1}{1}
	\bglabelx{0}{15}
	\bglabelx{5}{20}
	\bglabelx{10}{25}
	\bglabelx{15}{30}
	
	\bgblock{0}{2}{$P_2$}
	\bgblock{3}{11}{$P_5$}
\end{blockgraph}
\\
Als Bedienzeit in der Formel für die Bediengüte haben wir die Bedienzeitforderung angenommen. Abgesehen davon fehlt eine Definition, ob die Bediengüte proportional oder anti-proportional ist. Wir gehen davon aus, dass eine hohe Bediengüte eine hohe Priorität impliziert.
\\
\\
(1b) \quad Round Robin: $\Delta t = 2$
\\
\begin{blockgraph}{15}{1}{1}
	
	
	
	\bglabelxx{0}
	\bglabelxx{5}
	\bglabelxx{10}
	\bglabelxx{15}
	
	\bgblock{0}{2}{$P_1$}
	\bgblock{2}{4}{$P_1$}
	
	\bgblock{4}{5}{$P_1$}
	\bgemptysingleblock{5}
	
	\bgblock{6}{7}{$P_2$}
	\bgemptysingleblock{7}
	
	\bgblock{8}{9}{$P_1$}
	\bgemptysingleblock{9}
	
	\bgblock{10}{11}{$P_3$}
	\bgemptysingleblock{11}
	
	\bgblock{12}{13}{$P_2$}
	\bgemptysingleblock{13}
	
	\bgblock{14}{15}{$P_4$}
	
	
	% 6 : P2 - P1 - P3
	% 7 : (P1 - P3 - P2 - P4)
	% 8 : P1 - P3 - P2 - P4
	% 9 : (P3 - P2 - P4 - P5)
	% 10: P3 - P2 - P4 - P5
	% 11: (P2 - P4 - P5)
	% 12: P2 - P4 - P5
	% 13: (P4 - P5 - P2)
	% 14: P4 - P5 - P2
	% 15: (P5 - P2 - P4)
	% 16: P5 - P2 - P4
	% 17: (P2 - P4 - P5)
	% 18: P2 - P4 - P5
	% 19: (P4 - P5 - P2)
	% 20: P4 - P5 - P2
	% 21: (P5 - P2)
	% 22: P5 - P2
	% 23: (P2 - P5)
	% 24: P2 - P5
	% 25: (P5 - P2)
	% 26: P5 - P2
	% 27: (P2 - P5)
	% 28: P2 - P5
	% 29: (P5)
	% 30: P5
	
\end{blockgraph}
\begin{blockgraph}{15}{1}{1}
	\bglabelx{0}{15}
	\bglabelx{5}{20}
	\bglabelx{10}{25}
	\bglabelx{15}{30}
	
	\bgemptysingleblock{0}
	
	\bgblock{1}{2}{$P_5$}
	\bgemptysingleblock{2}
	
	\bgblock{3}{4}{$P_2$}
	\bgemptysingleblock{4}
	
	\bgblock{5}{6}{$P_4$}
	\bgemptysingleblock{6}
	
	\bgblock{7}{8}{$P_5$}
	\bgemptysingleblock{8}
	
	\bgblock{9}{10}{$P_2$}
	\bgemptysingleblock{10}
	
	\bgblock{11}{12}{$P_5$}
	\bgemptysingleblock{12}
	
	\bgblock{13}{14}{$P_2$}
	\bgemptysingleblock{14}
\end{blockgraph}
\begin{blockgraph}{15}{1}{1}
	\bglabelx{0}{30}
	\bglabelx{5}{35}
	\bglabelx{10}{40}
	\bglabelx{15}{45}
	
	\bgblock{0}{2}{$P_5$}
	\bgblock{2}{4}{$P_5$}
	\bgblock{4}{5}{$P_5$}
\end{blockgraph}





\aufgabe{Echtzeit \& Mehrprozessor-Scheduling}

(2a) \quad Um Deadlines multipler Aufträge jederzeit einhalten zu können, müsste der besagte, ideale Scheduler ein Zeitintervall finden, welches stets ausreichend Kapazitäten für die Summe der Bedienzeitforderungen aller Aufträge bietet.
\\
Ferner wäre es nötig, dass dieses Zeitintervall auch noch ganzzahlig, also ohne Divisionsrest, teilber durch die kumulierte Periodendauer aller Aufträge ist.
\\
\\
Die Länge des Intervalls würde dabei dem kleinsten, gemeinsamen Vielfachen der Periodendauer aller Aufträge entsprechen:
\\
\begin{equation*}
	kgV = 4 * 7 * 3 = 84  
\end{equation*}
\\
Danach ergibt sich für die benötigte Bedienzeit für die einzelnen Aufträge durch:
\\
\begin{equation*}
	\frac{\text{Länge-Intervall}}{\text{Periodendauer vom Auftrag}} = \text{Anzahl Perioden}
\end{equation*}
\\
Und die insgesamt benötigte Bedienzeit durch:
\\
\begin{equation*}
	\text{Anzahl Perioden} * \text{Bedienzeitforderung pro Periode} = \text{Gesamtbedienzeit}
\end{equation*}
\\
Daraus ergibt sich für die Aufträge $A_1$, $A_2$ und $A_3$ folgendes:
\begin{center}
	\begin{tabular}{l c c}
		Aufgabe & Anz. Perioden & Benötigte Bedienzeit\\\hline
		\\
		$A_1$ & $\frac{84}{4} = 21$  & $21 * 1 = 21$
		\\
		\\
		$A_2$ & $\frac{84}{7} = 12$  & $12 * 3 = 36$
		\\
		\\
		$A_3$ & $\frac{84}{3} = 28$  & $28 * 1 = 28$
	\end{tabular}\bigskip\\
	Daraus resultiert die Bedienzeit insgesamt: $21 + 36 + 28 = 85$
\end{center}
Insgesamt würde damit also mehr Bedienzeit benötigt, als das Intervall Kapazitäten hat verfügbar hat.
\\
Die Deadlines würden also auch von einem idealen Scheduler nicht eingehalten werden können.
\\
\\
(2c)

\begin{blockgraph}{15}{4}{1}
	\bglabelxx{0}
	\bglabelxx{5}
	\bglabelxx{10}
	\bglabelxx{15}
	
	\bglabely{0}{CPU 0}
	\bgblock[0]{0}{4}{$P_1$}
	\bgblock[0]{4}{5}{$P_2$}
	\bgblock[0]{5}{10}{$P_6$}
	\bgblock[0]{10}{14}{$P_7$}
	
	\bglabely{1}{CPU 1}
	\bgblock[1]{2}{7}{$P_3$}
	\bgblock[1]{7}{11}{$P_2$}
	
	\bglabely{2}{CPU 2}
	\bgblock[2]{2}{3}{$P_2$}
	\bgblock[2]{3}{11}{$P_5$}
	
	\bglabely{3}{CPU 3}
	\bgblock[3]{3}{11}{$P_4$}
\end{blockgraph}


\aufgabe{Prioritätsinversion}


(3a) \quad Die in der Aufgabe genannten Werte wurden mit 5 dividiert, um sie leichter darzustellen:
\begin{center}
	\begin{tabular}{l c c c}
		Auftrag & $M$ & $B$ & $Z$\\\hline
		Periodendauer $p_i$ & $23$ & $8$ & $12$\\
		Bedienzeit $b_i$ & $6$ & $2$ & $4$
	\end{tabular}
\end{center}
Es folgt die Intervallsdarstellung $[0,34]$ mit $Prio(B) > Prio(Z) > Prio(M)$:
\\
\\
\begin{blockgraph}{35}{5}{0.4}
	\bglabelxx{0}
	\bglabelxx{5}
	\bglabelxx{10}
	\bglabelxx{15}
	\bglabelxx{20}
	\bglabelxx{25}
	\bglabelxx{30}
	\bglabelxx{35}
	
	
	\bglabely{4}{M}
	\bgblock[4]{0}{6}{}
	% \bgemptyblock[4]{6}{23}
	\bgblock[4]{23}{29}{}
	% \bgemptyblock[4]{29}{34}
	
	\bglabely{3}{Z}
	\bgblock[3]{0}{4}{}
	% \bgemptyblock[3]{0}{4}
	\bgblock[3]{12}{16}{}
	% \bgemptyblock[3]{12}{16}
	\bgblock[3]{24}{28}{}
	% \bgemptyblock[3]{24}{28}
	
	\bglabely{2}{B}
	\bgblock[2]{0}{2}{}
	% \bgemptyblock[2]{0}{2}
	\bgblock[2]{8}{10}{}
	% \bgemptyblock[2]{8}{10}
	\bgblock[2]{16}{18}{}
	% \bgemptyblock[2]{16}{18}
	\bgblock[2]{24}{26}{}
	% \bgemptyblock[2]{24}{26}
	\bgblock[2]{32}{34}{}
	% \bgemptyblock[2]{32}{34}
	
	\bglabely{1}{Lock}
	\bgblock[1]{0}{2}{$B$}
	\bgemptyblock[1]{2}{6}
	\bgblock[1]{6}{12}{$M$}
	\bgblock[1]{12}{14}{$B$}
	\bgemptyblock[1]{14}{16}
	\bgblock[1]{16}{18}{$B$}
	\bgemptyblock[1]{18}{23}
	\bgblock[1]{23}{33}{$M$}
	\bgblock[1]{33}{34}{$B$}
	
	\bglabely{0}{CPU}
	\bgblock[0]{0}{2}{$B$}
	\bgblock[0]{2}{6}{$Z$}
	\bgblock[0]{6}{12}{$M$}
	\bgblock[0]{12}{14}{$B$}
	\bgblock[0]{14}{16}{$Z$}
	\bgblock[0]{16}{18}{$B$}
	\bgblock[0]{18}{20}{$Z$}
	\bgemptyblock[0]{20}{23}
	\bgblock[0]{23}{24}{$M$}
	\bgblock[0]{24}{28}{$Z$}
	\bgblock[0]{28}{33}{$M$}
	\bgblock[0]{33}{34}{$B$}
\end{blockgraph}
\\
\small{* bisher haben wir die Blockgraphen stets einem Skalierungsfaktor von 1 gezeichnet, da dies bei uns der einzig verwendete Modus war, in dem die Grafik nicht verzerrt aussieht (Blöcke stets kleiner als 1x1 Kästchen, Zusammenhänge schwerer zu erkennen). Bei dieser Aufgabe war uns dies allerdings zu umständlich, da wir ansonsten 3 Blockgraphen hätten verwenden müssen.}
\normalsize
\\
\\
In der letzten Verdängung von M durch Z wird als Konsequenz davon in $[24,32]$ die Deadline von Auftrag B nicht eingehalten.
\\
\\
Zeitpunkt 12 \quad Verzögerte Ausführung von B, weil in $[6,12]$ von M die Semaphore genutzt wird
\\
\\
Zeitpunkt 16 \quad B verdängt Z.
\\
\\
Zeitpunkt 24 \quad Z verdängt M, Semaphore ist gesperrt.


\end{document}
